const __vite__fileDeps=["assets/index-BkCeB0Cp.js","assets/_commonjsHelpers-Cpj98o6Y.js","assets/ink-es2015-B9WHLL_v.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var ee,k,Rt,V,Ke,It,Ee,He,Ce,xe,Ot,J={},jt=[],gn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,he=Array.isArray;function j(e,t){for(var n in t)e[n]=t[n];return e}function Ft(e){var t=e.parentNode;t&&t.removeChild(e)}function Ht(e,t,n){var o,r,i,s={};for(i in t)i=="key"?o=t[i]:i=="ref"?r=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?ee.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return K(e,s,o,r,null)}function K(e,t,n,o,r){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++Rt,__i:-1,__u:0};return r==null&&k.vnode!=null&&k.vnode(i),i}function F(e){return e.children}function X(e,t){this.props=e,this.context=t}function U(e,t){if(t==null)return e.__?U(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?U(e):null}function Mt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Mt(e)}}function Pe(e){(!e.__d&&(e.__d=!0)&&V.push(e)&&!_e.__r++||Ke!==k.debounceRendering)&&((Ke=k.debounceRendering)||It)(_e)}function _e(){var e,t,n,o,r,i,s,l;for(V.sort(Ee);e=V.shift();)e.__d&&(t=V.length,o=void 0,i=(r=(n=e).__v).__e,s=[],l=[],n.__P&&((o=j({},r)).__v=r.__v+1,k.vnode&&k.vnode(o),Me(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[i]:null,s,i??U(r),!!(32&r.__u),l),o.__v=r.__v,o.__.__k[o.__i]=o,Ut(s,o,l),o.__e!=i&&Mt(o)),V.length>t&&V.sort(Ee));_e.__r=0}function Vt(e,t,n,o,r,i,s,l,_,u,f){var a,p,d,h,y,v=o&&o.__k||jt,m=t.length;for(n.__d=_,mn(n,t,v),_=n.__d,a=0;a<m;a++)(d=n.__k[a])!=null&&typeof d!="boolean"&&typeof d!="function"&&(p=d.__i===-1?J:v[d.__i]||J,d.__i=a,Me(e,d,p,r,i,s,l,_,u,f),h=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&Ve(p.ref,null,d),f.push(d.ref,d.__c||h,d)),y==null&&h!=null&&(y=h),65536&d.__u||p.__k===d.__k?(_&&!_.isConnected&&(_=U(p)),_=Dt(d,_,e)):typeof d.type=="function"&&d.__d!==void 0?_=d.__d:h&&(_=h.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=_,n.__e=y}function mn(e,t,n){var o,r,i,s,l,_=t.length,u=n.length,f=u,a=0;for(e.__k=[],o=0;o<_;o++)s=o+a,(r=e.__k[o]=(r=t[o])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?K(null,r,null,null,null):he(r)?K(F,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?K(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=e,r.__b=e.__b+1,l=vn(r,n,s,f),r.__i=l,i=null,l!==-1&&(f--,(i=n[l])&&(i.__u|=131072)),i==null||i.__v===null?(l==-1&&a--,typeof r.type!="function"&&(r.__u|=65536)):l!==s&&(l===s+1?a++:l>s?f>_-s?a+=l-s:a--:l<s?l==s-1&&(a=l-s):a=0,l!==o+a&&(r.__u|=65536))):(i=n[s])&&i.key==null&&i.__e&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=U(i)),Ae(i,i,!1),n[s]=null,f--);if(f)for(o=0;o<u;o++)(i=n[o])!=null&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=U(i)),Ae(i,i))}function Dt(e,t,n){var o,r;if(typeof e.type=="function"){for(o=e.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=e,t=Dt(o[r],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Le(e,t){return t=t||[],e==null||typeof e=="boolean"||(he(e)?e.some(function(n){Le(n,t)}):t.push(e)),t}function vn(e,t,n,o){var r=e.key,i=e.type,s=n-1,l=n+1,_=t[n];if(_===null||_&&r==_.key&&i===_.type&&!(131072&_.__u))return n;if(o>(_!=null&&!(131072&_.__u)?1:0))for(;s>=0||l<t.length;){if(s>=0){if((_=t[s])&&!(131072&_.__u)&&r==_.key&&i===_.type)return s;s--}if(l<t.length){if((_=t[l])&&!(131072&_.__u)&&r==_.key&&i===_.type)return l;l++}}return-1}function Xe(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||gn.test(t)?n:n+"px"}function ne(e,t,n,o,r){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Xe(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||Xe(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.u=o.u:(n.u=He,e.addEventListener(t,i?xe:Ce,i)):e.removeEventListener(t,i?xe:Ce,i);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Je(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=He++;else if(t.t<n.u)return;return n(k.event?k.event(t):t)}}}function Me(e,t,n,o,r,i,s,l,_,u){var f,a,p,d,h,y,v,m,w,g,b,$,C,L,q,P=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(_=!!(32&n.__u),i=[l=t.__e=n.__e]),(f=k.__b)&&f(t);e:if(typeof P=="function")try{if(m=t.props,w=(f=P.contextType)&&o[f.__c],g=f?w?w.props.value:f.__:o,n.__c?v=(a=t.__c=n.__c).__=a.__E:("prototype"in P&&P.prototype.render?t.__c=a=new P(m,g):(t.__c=a=new X(m,g),a.constructor=P,a.render=bn),w&&w.sub(a),a.props=m,a.state||(a.state={}),a.context=g,a.__n=o,p=a.__d=!0,a.__h=[],a._sb=[]),a.__s==null&&(a.__s=a.state),P.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=j({},a.__s)),j(a.__s,P.getDerivedStateFromProps(m,a.__s))),d=a.props,h=a.state,a.__v=t,p)P.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(P.getDerivedStateFromProps==null&&m!==d&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(m,g),!a.__e&&(a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(m,a.__s,g)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(a.props=m,a.state=a.__s,a.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(H){H&&(H.__=t)}),b=0;b<a._sb.length;b++)a.__h.push(a._sb[b]);a._sb=[],a.__h.length&&s.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(m,a.__s,g),a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(d,h,y)})}if(a.context=g,a.props=m,a.__P=e,a.__e=!1,$=k.__r,C=0,"prototype"in P&&P.prototype.render){for(a.state=a.__s,a.__d=!1,$&&$(t),f=a.render(a.props,a.state,a.context),L=0;L<a._sb.length;L++)a.__h.push(a._sb[L]);a._sb=[]}else do a.__d=!1,$&&$(t),f=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++C<25);a.state=a.__s,a.getChildContext!=null&&(o=j(j({},o),a.getChildContext())),p||a.getSnapshotBeforeUpdate==null||(y=a.getSnapshotBeforeUpdate(d,h)),Vt(e,he(q=f!=null&&f.type===F&&f.key==null?f.props.children:f)?q:[q],t,n,o,r,i,s,l,_,u),a.base=t.__e,t.__u&=-161,a.__h.length&&s.push(a),v&&(a.__E=a.__=null)}catch(H){t.__v=null,_||i!=null?(t.__e=l,t.__u|=_?160:32,i[i.indexOf(l)]=null):(t.__e=n.__e,t.__k=n.__k),k.__e(H,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=yn(n.__e,t,n,o,r,i,s,_,u);(f=k.diffed)&&f(t)}function Ut(e,t,n){t.__d=void 0;for(var o=0;o<n.length;o++)Ve(n[o],n[++o],n[++o]);k.__c&&k.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(i){i.call(r)})}catch(i){k.__e(i,r.__v)}})}function yn(e,t,n,o,r,i,s,l,_){var u,f,a,p,d,h,y,v=n.props,m=t.props,w=t.type;if(w==="svg"?r="http://www.w3.org/2000/svg":w==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),i!=null){for(u=0;u<i.length;u++)if((d=i[u])&&"setAttribute"in d==!!w&&(w?d.localName===w:d.nodeType===3)){e=d,i[u]=null;break}}if(e==null){if(w===null)return document.createTextNode(m);e=document.createElementNS(r,w,m.is&&m),i=null,l=!1}if(w===null)v===m||l&&e.data===m||(e.data=m);else{if(i=i&&ee.call(e.childNodes),v=n.props||J,!l&&i!=null)for(v={},u=0;u<e.attributes.length;u++)v[(d=e.attributes[u]).name]=d.value;for(u in v)if(d=v[u],u!="children"){if(u=="dangerouslySetInnerHTML")a=d;else if(u!=="key"&&!(u in m)){if(u=="value"&&"defaultValue"in m||u=="checked"&&"defaultChecked"in m)continue;ne(e,u,null,d,r)}}for(u in m)d=m[u],u=="children"?p=d:u=="dangerouslySetInnerHTML"?f=d:u=="value"?h=d:u=="checked"?y=d:u==="key"||l&&typeof d!="function"||v[u]===d||ne(e,u,d,v[u],r);if(f)l||a&&(f.__html===a.__html||f.__html===e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(a&&(e.innerHTML=""),Vt(e,he(p)?p:[p],t,n,o,w==="foreignObject"?"http://www.w3.org/1999/xhtml":r,i,s,i?i[0]:n.__k&&U(n,0),l,_),i!=null)for(u=i.length;u--;)i[u]!=null&&Ft(i[u]);l||(u="value",h!==void 0&&(h!==e[u]||w==="progress"&&!h||w==="option"&&h!==v[u])&&ne(e,u,h,v[u],r),u="checked",y!==void 0&&y!==e[u]&&ne(e,u,y,v[u],r))}return e}function Ve(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(o){k.__e(o,n)}}function Ae(e,t,n){var o,r;if(k.unmount&&k.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||Ve(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){k.__e(i,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&Ae(o[r],t,n||typeof e.type!="function");n||e.__e==null||Ft(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function bn(e,t,n){return this.constructor(e,n)}function kn(e,t,n){var o,r,i,s;k.__&&k.__(e,t),r=(o=typeof n=="function")?null:t.__k,i=[],s=[],Me(t,e=(!o&&n||t).__k=Ht(F,null,[e]),r||J,J,t.namespaceURI,!o&&n?[n]:r?null:t.firstChild?ee.call(t.childNodes):null,i,!o&&n?n:r?r.__e:t.firstChild,o,s),Ut(i,e,s)}function wn(e,t,n){var o,r,i,s,l=j({},e.props);for(i in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)i=="key"?o=t[i]:i=="ref"?r=t[i]:l[i]=t[i]===void 0&&s!==void 0?s[i]:t[i];return arguments.length>2&&(l.children=arguments.length>3?ee.call(arguments,2):n),K(e.type,l,o||e.key,r||e.ref,null)}function zt(e,t){var n={__c:t="__cC"+Ot++,__:e,Consumer:function(o,r){return o.children(r)},Provider:function(o){var r,i;return this.getChildContext||(r=[],(i={})[t]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&r.some(function(l){l.__e=!0,Pe(l)})},this.sub=function(s){r.push(s);var l=s.componentWillUnmount;s.componentWillUnmount=function(){r.splice(r.indexOf(s),1),l&&l.call(s)}}),o.children}};return n.Provider.__=n.Consumer.contextType=n}ee=jt.slice,k={__e:function(e,t,n,o){for(var r,i,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((i=r.constructor)&&i.getDerivedStateFromError!=null&&(r.setState(i.getDerivedStateFromError(e)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),s=r.__d),s)return r.__E=r}catch(l){e=l}throw e}},Rt=0,X.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=j({},this.state),typeof e=="function"&&(e=e(j({},n),this.props)),e&&j(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Pe(this))},X.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Pe(this))},X.prototype.render=F,V=[],It=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ee=function(e,t){return e.__v.__b-t.__v.__b},_e.__r=0,He=0,Ce=Je(!1),xe=Je(!0),Ot=0;var Sn=0;function c(e,t,n,o,r,i){t||(t={});var s,l,_=t;if("ref"in _)for(l in _={},t)l=="ref"?s=t[l]:_[l]=t[l];var u={type:e,props:_,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Sn,__i:-1,__u:0,__source:r,__self:i};if(typeof e=="function"&&(s=e.defaultProps))for(l in s)_[l]===void 0&&(_[l]=s[l]);return k.vnode&&k.vnode(u),u}const $n="modulepreload",En=function(e,t){return e[0]==="."?new URL(e,t).href:e},Qe={},Ze=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(_=>{if(_=En(_,o),_ in Qe)return;Qe[_]=!0;const u=_.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(!!o)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===_&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${_}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":$n,u||(p.as="script",p.crossOrigin=""),p.href=_,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((d,h)=>{p.addEventListener("load",d),p.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${_}`)))})}))}return r.then(()=>t()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};var N,S,be,et,Q=0,Wt=[],ce=[],E=k,tt=E.__b,nt=E.__r,ot=E.diffed,rt=E.__c,it=E.unmount,st=E.__;function pe(e,t){E.__h&&E.__h(S,e,Q||t),Q=0;var n=S.__H||(S.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:ce}),n.__[e]}function I(e){return Q=1,Cn(qt,e)}function Cn(e,t,n){var o=pe(N++,2);if(o.t=e,!o.__c&&(o.__=[qt(void 0,t),function(l){var _=o.__N?o.__N[0]:o.__[0],u=o.t(_,l);_!==u&&(o.__N=[u,o.__[1]],o.__c.setState({}))}],o.__c=S,!S.u)){var r=function(l,_,u){if(!o.__c.__H)return!0;var f=o.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!i||i.call(this,l,_,u);var a=!1;return f.forEach(function(p){if(p.__N){var d=p.__[0];p.__=p.__N,p.__N=void 0,d!==p.__[0]&&(a=!0)}}),!(!a&&o.__c.props===l)&&(!i||i.call(this,l,_,u))};S.u=!0;var i=S.shouldComponentUpdate,s=S.componentWillUpdate;S.componentWillUpdate=function(l,_,u){if(this.__e){var f=i;i=void 0,r(l,_,u),i=f}s&&s.call(this,l,_,u)},S.shouldComponentUpdate=r}return o.__N||o.__}function R(e,t){var n=pe(N++,3);!E.__s&&Nt(n.__H,t)&&(n.__=e,n.i=t,S.__H.__h.push(n))}function xn(e){return Q=5,Bt(function(){return{current:e}},[])}function Bt(e,t){var n=pe(N++,7);return Nt(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function T(e,t){return Q=8,Bt(function(){return e},t)}function Pn(e){var t=S.context[e.__c],n=pe(N++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(S)),t.props.value):e.__}function Ln(){for(var e;e=Wt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ae),e.__H.__h.forEach(Te),e.__H.__h=[]}catch(t){e.__H.__h=[],E.__e(t,e.__v)}}E.__b=function(e){S=null,tt&&tt(e)},E.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),st&&st(e,t)},E.__r=function(e){nt&&nt(e),N=0;var t=(S=e.__c).__H;t&&(be===S?(t.__h=[],S.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=ce,n.__N=n.i=void 0})):(t.__h.forEach(ae),t.__h.forEach(Te),t.__h=[],N=0)),be=S},E.diffed=function(e){ot&&ot(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Wt.push(t)!==1&&et===E.requestAnimationFrame||((et=E.requestAnimationFrame)||An)(Ln)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==ce&&(n.__=n.__V),n.i=void 0,n.__V=ce})),be=S=null},E.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ae),n.__h=n.__h.filter(function(o){return!o.__||Te(o)})}catch(o){t.some(function(r){r.__h&&(r.__h=[])}),t=[],E.__e(o,n.__v)}}),rt&&rt(e,t)},E.unmount=function(e){it&&it(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{ae(o)}catch(r){t=r}}),n.__H=void 0,t&&E.__e(t,n.__v))};var ct=typeof requestAnimationFrame=="function";function An(e){var t,n=function(){clearTimeout(o),ct&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);ct&&(t=requestAnimationFrame(n))}function ae(e){var t=S,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),S=t}function Te(e){var t=S;e.__c=e.__(),S=t}function Nt(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function qt(e,t){return typeof t=="function"?t(e):t}var Tn={};function oe(e,t){for(var n in t)e[n]=t[n];return e}function Rn(e,t,n){var o,r=/(?:\?([^#]*))?(#.*)?$/,i=e.match(r),s={};if(i&&i[1])for(var l=i[1].split("&"),_=0;_<l.length;_++){var u=l[_].split("=");s[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}e=Re(e.replace(r,"")),t=Re(t||"");for(var f=Math.max(e.length,t.length),a=0;a<f;a++)if(t[a]&&t[a].charAt(0)===":"){var p=t[a].replace(/(^:|[+*?]+$)/g,""),d=(t[a].match(/[+*?]+$/)||Tn)[0]||"",h=~d.indexOf("+"),y=~d.indexOf("*"),v=e[a]||"";if(!v&&!y&&(d.indexOf("?")<0||h)){o=!1;break}if(s[p]=decodeURIComponent(v),h||y){s[p]=e.slice(a).map(decodeURIComponent).join("/");break}}else if(t[a]!==e[a]){o=!1;break}return(n.default===!0||o!==!1)&&s}function In(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function On(e,t){return e.index=t,e.rank=function(n){return n.props.default?0:Re(n.props.path).map(jn).join("")}(e),e.props}function Re(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function jn(e){return e.charAt(0)==":"?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var Fn={},D=[],at=[],A=null,Yt={url:De()},Hn=zt(Yt);function De(){var e;return""+((e=A&&A.location?A.location:A&&A.getCurrentLocation?A.getCurrentLocation():typeof location<"u"?location:Fn).pathname||"")+(e.search||"")}function B(e,t){return t===void 0&&(t=!1),typeof e!="string"&&e.url&&(t=e.replace,e=e.url),function(n){for(var o=D.length;o--;)if(D[o].canRoute(n))return!0;return!1}(e)&&function(n,o){o===void 0&&(o="push"),A&&A[o]?A[o](n):typeof history<"u"&&history[o+"State"]&&history[o+"State"](null,null,n)}(e,t?"replace":"push"),Gt(e)}function Gt(e){for(var t=!1,n=0;n<D.length;n++)D[n].routeTo(e)&&(t=!0);return t}function Mn(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return B(t)}}function Vn(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function Dn(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do if(t.localName==="a"&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(Mn(t))return Vn(e)}while(t=t.parentNode)}}var lt=!1;function Kt(e){e.history&&(A=e.history),this.state={url:e.url||De()}}oe(Kt.prototype=new X,{shouldComponentUpdate:function(e){return e.static!==!0||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=Le(this.props.children);return this.g(t,e)!==void 0},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;lt||(lt=!0,A||addEventListener("popstate",function(){Gt(De())}),addEventListener("click",Dn)),D.push(this),A&&(this.u=A.listen(function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),D.splice(D.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(On).sort(In);for(var n=0;n<e.length;n++){var o=e[n],r=Rn(t,o.props.path,o.props);if(r)return[o,r]}},render:function(e,t){var n,o,r=e.onChange,i=t.url,s=this.c,l=this.g(Le(e.children),i);if(l&&(o=wn(l[0],oe(oe({url:i,matches:n=l[1]},n),{key:void 0,ref:void 0}))),i!==(s&&s.url)){oe(Yt,s=this.c={url:i,previous:s&&s.url,current:o,path:o?o.props.path:null,matches:n}),s.router=this,s.active=o?[o]:[];for(var _=at.length;_--;)at[_]({});typeof r=="function"&&r(s)}return Ht(Hn.Provider,{value:s},o)}});function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ue.apply(null,arguments)}var W;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(W||(W={}));var _t=function(e){return e};function Un(e){e===void 0&&(e={});var t=e,n=t.initialEntries,o=n===void 0?["/"]:n,r=t.initialIndex,i=o.map(function(g){var b=_t(ue({pathname:"/",search:"",hash:"",state:null,key:ft()},typeof g=="string"?ht(g):g));return b}),s=ut(r??i.length-1,0,i.length-1),l=W.Pop,_=i[s],u=dt(),f=dt();function a(g){return typeof g=="string"?g:zn(g)}function p(g,b){return b===void 0&&(b=null),_t(ue({pathname:_.pathname,search:"",hash:""},typeof g=="string"?ht(g):g,{state:b,key:ft()}))}function d(g,b,$){return!f.length||(f.call({action:g,location:b,retry:$}),!1)}function h(g,b){l=g,_=b,u.call({action:l,location:_})}function y(g,b){var $=W.Push,C=p(g,b);function L(){y(g,b)}d($,C,L)&&(s+=1,i.splice(s,i.length,C),h($,C))}function v(g,b){var $=W.Replace,C=p(g,b);function L(){v(g,b)}d($,C,L)&&(i[s]=C,h($,C))}function m(g){var b=ut(s+g,0,i.length-1),$=W.Pop,C=i[b];function L(){m(g)}d($,C,L)&&(s=b,h($,C))}var w={get index(){return s},get action(){return l},get location(){return _},createHref:a,push:y,replace:v,go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(b){return u.push(b)},block:function(b){return f.push(b)}};return w}function ut(e,t,n){return Math.min(Math.max(e,t),n)}function dt(){var e=[];return{get length(){return e.length},push:function(n){return e.push(n),function(){e=e.filter(function(o){return o!==n})}},call:function(n){e.forEach(function(o){return o&&o(n)})}}}function ft(){return Math.random().toString(36).substr(2,8)}function zn(e){var t=e.pathname,n=t===void 0?"/":t,o=e.search,r=o===void 0?"":o,i=e.hash,s=i===void 0?"":i;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function ht(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}const Xt=zt(null),Wn="Atrament Preact UI demo",Bn="atrament-preact-ui",Nn="Atrament Preact UI - shell for Ink games",qn="light",Yn="System",Gn={path:"game",source:"intercept.ink",script:"intercept.ink.json"},ge={name:Wn,short_name:Bn,description:Nn,theme:qn,font:Yn,game:Gn},Jt=ge.game.path,Qt=ge.game.script,Kn=["Atrament://",window.location.host,window.location.pathname,Jt,Qt].join(""),Zt=ge.theme,en=ge.font,Ue=100,me=10,Ie=Ue-me*3,Oe=Ue+me*5,Xn="The quick brown fox jumps over the lazy dog. Jackdaws love my big sphinx of quartz.";function Jn(e){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?e.interfaces.sound.mute(e.settings.get("mute")):e.interfaces.sound.mute(!0)})}function pt(e){if(!e)return;const t=document.querySelector(".atrament-text-container");t.style.background=e}function Qn(e){e.on("game/continueStory",()=>pt(e.state.get().game.background)),e.game.defineSceneProcessor(t=>{var n,o;if((n=t.tags)!=null&&n.BACKGROUND){const r=(o=t.tags)==null?void 0:o.BACKGROUND;e.state.setSubkey("game","background",r),pt(r)}})}let tn=()=>{};function Zn(e){tn=e}function je(e){return e?tn(e):null}function eo(e){const t=e.state.get().metadata.theme||Zt;e.settings.get("theme")||e.settings.set("theme",t)}function to(e){const t=e.state.get().metadata.font||en;e.settings.get("font")||e.settings.set("font",t)}const no={"--bg-color":"#FCFCFC","--fg-color":"#5D576B","--font-color":"#333333","--accent-bg-color":"#F7567C","--accent-fg-color":"#FCFCFC"},oo={"--bg-color":"#ffeedb","--fg-color":"#4c3b4d","--font-color":"#333333","--accent-bg-color":"#a53850","--accent-fg-color":"#ffeedb"},ro={"--bg-color":"#4c3b4d","--fg-color":"#FCFCFC","--font-color":"#EEEEEE","--accent-bg-color":"#F7567C","--accent-fg-color":"#EEEEEE"},Fe={light:no,sepia:oo,dark:ro};function io(e){Object.entries(Fe[e]||Fe[Zt]).forEach(([t,n])=>{document.documentElement.style.setProperty(t,n)})}const Z={System:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',"Fira Sans":'"Fira Sans", sans-serif',Lora:'"Lora", serif',Merriweather:'"Merriweather", serif',OpenDyslexic:'"OpenDyslexic", serif'};function so(e){document.documentElement.style.setProperty("--font-game",Z[e]||Z[en])}function co(e){e.settings.defineHandler("theme",(t,n)=>{io(n)}),e.settings.defineHandler("font",(t,n)=>{so(n)}),e.settings.defineHandler("animation",(t,n)=>{n?document.documentElement.style.removeProperty("--animation-disabled"):document.documentElement.style.setProperty("--animation-disabled","0s")})}function ao(e){e.game.defineSceneProcessor(t=>{t.images=[],t.content=t.content.map(n=>(n.tags.IMAGE&&(t.images.push(n.tags.IMAGE),n.image=n.tags.IMAGE),n))})}function lo(e){e.ink.story().onError=t=>{e.state.setKey("ERROR",t)},e.state.setKey("OVERLAY",{activeOverlay:null,content:""})}async function _o(e,t){e.on("*",(n,o)=>console.log(`%c Atrament > ${n} `,"color: #111111; background-color: #7FDBFF;",o)),co(e),await e.init(t,{applicationID:Kn,settings:{animation:!0,mute:!1,volume:50,fontSize:100}}),e.on("game/start",()=>lo(e)),Zn(e.game.getAssetPath),await e.game.init(Jt,Qt),await e.game.initInkStory(),eo(e),to(e),ao(e),Jn(e),Qn(e)}const uo="_application_wrapper_1q2ul_1",fo={application_wrapper:uo};let ke;function nn(){window.innerHeight!==ke&&(ke=window.innerHeight,document.documentElement.style.setProperty("--screen-vh",`${ke-1}px`))}window.addEventListener("resize",nn);const gt=({children:e})=>(R(nn,[]),c("div",{class:[fo.application_wrapper,"atrament-ui-app"].join(" "),children:e})),ho="_loading_51k52_1",po={loading:ho},go="_container_1jyh0_1",mo={container:go},ve=({children:e})=>c("div",{class:[mo.container,"atrament-container"].join(" "),children:e}),vo="_container_flex_i1hvv_1",yo={container_flex:vo},ze=({children:e})=>c("div",{class:[yo.container_flex,"atrament-flex-container"].join(" "),children:e}),bo="_sk_cube_grid_fv0g6_1",ko="_sk_cube1_fv0g6_17",wo="_sk_cube2_fv0g6_18",So="_sk_cube3_fv0g6_19",$o="_sk_cube4_fv0g6_20",Eo="_sk_cube5_fv0g6_21",Co="_sk_cube6_fv0g6_22",xo="_sk_cube7_fv0g6_23",Po="_sk_cube8_fv0g6_24",Lo="_sk_cube9_fv0g6_25",O={sk_cube_grid:bo,"sk-cubeGridScaleDelay":"_sk-cubeGridScaleDelay_fv0g6_1",sk_cube1:ko,sk_cube2:wo,sk_cube3:So,sk_cube4:$o,sk_cube5:Eo,sk_cube6:Co,sk_cube7:xo,sk_cube8:Po,sk_cube9:Lo},Ao=()=>c("div",{class:O.sk_cube_grid,children:[c("div",{class:O.sk_cube1}),c("div",{class:O.sk_cube2}),c("div",{class:O.sk_cube3}),c("div",{class:O.sk_cube4}),c("div",{class:O.sk_cube5}),c("div",{class:O.sk_cube6}),c("div",{class:O.sk_cube7}),c("div",{class:O.sk_cube8}),c("div",{class:O.sk_cube9})]}),To=()=>c(ve,{children:c(ze,{children:c("div",{class:[po.loading,"atrament-loading"].join(" "),children:c(Ao,{})})})});function Ro(e,t,n){let o=new Set([...t,void 0]);return e.listen((r,i,s)=>{o.has(s)&&n(r,i,s)})}function Io(e,t={}){let[,n]=I({}),[o]=I(e.get());return R(()=>{o!==e.get()&&n({})},[]),R(()=>{let r,i,s,l=()=>{r||(r=1,i=setTimeout(()=>{r=void 0,n({})}))};return t.keys?s=Ro(e,t.keys,l):s=e.listen(l),()=>{s(),clearTimeout(i)}},[e,""+t.keys]),e.get()}const x=()=>{const e=Pn(Xt),t=Io(e.store);return{atrament:e,state:t,canResume:e.game.canResume,gameStart:e.game.start,gameResume:e.game.resume,makeChoice:e.game.makeChoice,continueStory:e.game.continueStory,updateSettings:(n,o)=>{e.settings.set(n,o),e.settings.save()}}},Oo="_block_mlskr_1",jo="_block_start_mlskr_11",Fo="_block_end_mlskr_19",we={block:Oo,block_start:jo,block_end:Fo},de=({children:e,align:t})=>{const n=[we.block];return t==="start"?n.push(we.block_start):t==="end"&&n.push(we.block_end),n.push("atrament-block"),c("div",{class:n.join(" "),children:e})},Ho="_header_156ie_1",Mo="_header_align_156ie_9",mt={header:Ho,header_align:Mo},Vo=({children:e})=>c("div",{class:[mt.header,"atrament-header"].join(" "),children:c("div",{class:mt.header_align,children:e})}),Do="_link_menu_1yqgf_1",Uo={link_menu:Do},le=({children:e,key:t,onClick:n})=>c("div",{children:c("button",{onClick:n,class:Uo.link_menu,children:e},t)}),zo="_settings_container_1vpzy_1",Wo="_settings_toggle_1vpzy_23",vt={settings_container:zo,settings_toggle:Wo},Bo="_backdrop_p5ss5_1",No={backdrop:Bo},on=({onClick:e})=>c("div",{class:[No.backdrop,"atrament-backdrop"].join(" "),onClick:e}),qo="_modal_o1n5t_1",Yo={modal:qo},rn=({children:e})=>c("div",{class:[Yo.modal,"atrament-modal"].join(" "),children:e}),Go="_close_1r16k_1",Ko={close:Go},sn=({onClick:e})=>c("div",{class:Ko.close,children:c("button",{onClick:e,title:"Close",children:"✕"})}),Xo="_settings_sound_container_1ksau_1",Jo="_settings_sound_input_container_1ksau_11",Qo="_settings_sound_volume_1ksau_19",Zo="_settings_sound_icon_1ksau_33",z={settings_sound_container:Xo,settings_sound_input_container:Jo,settings_sound_volume:Qo,settings_sound_icon:Zo},er="_checkbox_wrapper_jogcq_1",tr="_checkbox_jogcq_1",yt={checkbox_wrapper:er,checkbox:tr,"focus-visible":"_focus-visible_jogcq_111"},cn=({enabled:e,onChange:t})=>c("div",{class:yt.checkbox_wrapper,children:c("input",{type:"checkbox",class:yt.checkbox,checked:e,onChange:t})}),nr=()=>{const{state:e,updateSettings:t}=x(),n=s=>t("mute",!s.target.checked),o=s=>t("volume",s.target.value),{mute:r,volume:i}=e.settings;return c(F,{children:[c("div",{class:[z.settings_sound,"atrament-settings-sound"].join(" "),children:[c(cn,{enabled:!r,onChange:n})," Sound"]}),c("div",{class:z.settings_sound_container,children:[c("div",{class:z.settings_sound_icon,children:"🔉"}),c("div",{class:z.settings_sound_input_container,children:c("input",{class:z.settings_sound_volume,disabled:r,type:"range",min:"0",max:"100",value:i,onChange:o})}),c("div",{class:z.settings_sound_icon,children:"🔊"})]})]})},or="_settings_fontsize_container_ov9gn_1",rr="_settings_font_a_ov9gn_11",ir="_settings_fontsize_input_container_ov9gn_23",sr="_settings_fontsize_input_ov9gn_23",cr="_settings_font_sample_ov9gn_43",M={settings_fontsize_container:or,settings_font_a:rr,settings_fontsize_input_container:ir,settings_fontsize_input:sr,settings_font_sample:cr},an=[];for(let e=Ie;e<=Oe;e+=me)an.push(e);const ar=()=>{const{state:e,updateSettings:t}=x(),{font:n,fontSize:o}=e.settings,r=i=>t("fontSize",i.target.value);return c("div",{class:[M.settings_text,"atrament-settings-text"].join(" "),children:[c("div",{class:M.settings_fontsize_container,children:[c("div",{class:M.settings_font_a,style:{"font-size":`${Ie}%`},children:"A"}),c("div",{class:M.settings_fontsize_input_container,children:[c("input",{class:M.settings_fontsize_input,type:"range",min:Ie,max:Oe,step:me,value:o||Ue,onInput:r,list:"fontSizes"}),c("datalist",{id:"fontSizes",children:an.map(i=>c("option",{value:i},i))})]}),c("div",{class:M.settings_font_a,style:{"font-size":`${Oe}%`},children:"A"})]}),c("div",{class:M.settings_font_sample,style:{"font-size":`${o}%`,"font-family":Z[n]},children:Xn})]})},lr="_settings_font_container_19hqe_1",_r={settings_font_container:lr},ur=()=>{const{state:e,updateSettings:t}=x(),n=r=>t("font",r.target.value),o=e.settings.font;return c("div",{class:[_r.settings_font_container,"atrament-settings-font"].join(" "),children:c("select",{onChange:n,style:{"font-family":Z[o]},children:Object.entries(Z).map(([r,i])=>c("option",{value:r,style:{"font-family":i},selected:o===r,children:r},r))})})},dr="_settings_theme_container_mkiko_1",fr="_settings_theme_button_mkiko_13",ln={settings_theme_container:dr,settings_theme_button:fr},hr=({themeId:e,themeConfig:t,onClick:n})=>{const o={color:t["--fg-color"],"background-color":t["--bg-color"]};return c("button",{class:ln.settings_theme_button,style:o,onClick:n,"data-theme-id":e,children:e})},pr=()=>{const{updateSettings:e}=x(),t=n=>e("theme",n.target.attributes["data-theme-id"].value);return c("div",{class:[ln.settings_theme_container,"atrament-settings-theme"].join(" "),children:Object.entries(Fe).map(([n,o])=>c(hr,{themeId:n,themeConfig:o,onClick:t},n))})},gr=()=>{const{state:e,updateSettings:t}=x(),n=o=>t("animation",o.target.checked);return c("div",{class:["atrament-settings-animation"].join(" "),children:[c(cn,{enabled:e.settings.animation,onChange:n})," Animations"]})},mr="_settings_about_1owsm_1",vr={settings_about:mr},yr=()=>{const{atrament:e}=x();return c("div",{class:vr.settings_about,children:["atrament ",e.version]})},We=()=>{const[e,t]=I(!1),n=T(()=>t(!e),[e]),o=T(r=>{r.key==="Escape"&&t(!1)},[]);return R(()=>(document.addEventListener("keydown",o,!1),()=>{document.removeEventListener("keydown",o,!1)}),[o]),e?c("div",{class:vt.settings_container,children:[c(on,{onClick:n}),c(rn,{children:[c(sn,{onClick:n}),c(gr,{}),c(nr,{}),c(ur,{}),c(ar,{}),c(pr,{}),c(yr,{})]})]}):c("button",{class:vt.settings_toggle,onClick:n,children:"☰"})},br=()=>{const{state:e,canResume:t,gameStart:n,gameResume:o}=x(),{title:r,author:i}=e.metadata,[s,l]=I(!1);R(()=>{(async()=>{const p=await t();l(!!p)})()},[t]);const _=T(async()=>{await n(),B("/game")},[n]),u=T(async()=>{await o(),B("/game")},[o]),f=()=>B("/about");return c(ve,{children:c(ze,{children:[c(We,{}),c(Vo,{children:[c("h1",{children:r||"Atrament UI"}),c("p",{children:i?`by ${i}`:"Test application"})]}),c(de,{align:"end",children:[s?c(le,{onClick:u,children:"Continue"},"continuegame"):"",c(le,{onClick:_,children:"New game"},"startgame"),c(le,{onClick:f,children:"About"},"about")]})]})})},kr="_error_modal_2c370_1",wr="_error_message_2c370_12",bt={error_modal:kr,error_message:wr},Sr=()=>{const{atrament:e,state:t}=x(),n=T(()=>e.state.setKey("ERROR",null),[e]),o=T(r=>{r.key==="Escape"&&n()},[n]);if(R(()=>(document.addEventListener("keydown",o,!1),()=>{document.removeEventListener("keydown",o,!1)}),[o]),t.ERROR)return c("div",{class:bt.error_modal,children:[c(on,{onClick:n}),c(rn,{children:[c(sn,{onClick:n}),c("p",{class:bt.error_message,children:t.ERROR})]})]})},$r="_toolbar_1b163_1",Er={toolbar:$r},Cr="_inline_button_16ghm_1",xr="_bordered_button_16ghm_20",kt={inline_button:Cr,bordered_button:xr};function ye(e){const t=e.match(/(\w+)=["']?((?:.?(?!["']?\s+(?:\S+)=|\s*\/?[>"']))+.)["']?/g),n={};return t&&t.forEach(o=>{const[,r,i]=o.match(/(.+)=(.+)/);try{n[r]=JSON.parse(i)}catch{n[r]=i}}),n}function wt(e,t){let n;try{n=e.ink.evaluateFunction(t,[],!0)}catch(o){e.ink.story().onError(o.toString())}return n}function St(e,t,n){e.state.setSubkey("OVERLAY","activeOverlay",t);let o=n;const r=n.split(`
`),s=r.shift().match(/\[title\](.+?)\[\/title\]/i);s&&(e.state.setSubkey("OVERLAY","title",s[1]),o=r.join(`
`)),e.state.setSubkey("OVERLAY","content",o)}const Pr=({children:e,options:t})=>{const{atrament:n,state:o}=x();console.log(t);const r=T(()=>{const s=wt(n,t.onclick);if(s.output)St(n,t.onclick,s.output);else{const l=o.OVERLAY.activeOverlay;if(l){const _=wt(n,l);St(n,l,_.output)}}},[n,t.onclick,o]);let i=t.bordered===!1?kt.inline_button:kt.bordered_button;return c("button",{class:i,onClick:r,disabled:t.disabled,children:e})},Lr={regexp:/\[button.+?\].+?\[\/button\]/ig,replacer:(e,t)=>{const n=e.match(/\[button(.+?)\](.+?)\[\/button\]/i);let o=n[1];o.startsWith("=")&&(o=`onclick${o}`);const r=ye(o);return c(Pr,{options:r,children:t(n[2])})}},Ar="_inline_image_i0e0w_1",Tr={inline_image:Ar},Rr={regexp:/\[img\].+?\[\/img\]/ig,replacer:e=>{const t=e.match(/\[img\](.+?)\[\/img\]/i);return c("img",{class:Tr.inline_image,src:je(t[1])})}},Ir="_inline_link_11pb8_1",Or={inline_link:Ir},jr=({children:e,choice:t})=>{const{atrament:n,state:o,makeChoice:r,continueStory:i}=x(),s=T(()=>{const l=o.scenes.length-1,u=o.scenes[l].choices.findIndex(f=>f.choice===t);if(u<0){n.state.setKey("ERROR",`[link=${t}] leads to nonexistent choice!`);return}r(u),i()},[n,i,r,t,o]);return c("a",{href:"#",class:Or.inline_link,onClick:s,children:e})},Fr={regexp:/\[link=.+?\].+?\[\/link\]/ig,replacer:(e,t)=>{const n=e.match(/\[link=(.+?)\](.+?)\[\/link\]/i);return c(jr,{choice:n[1],children:t(n[2])})}},Hr="_progress_frame_no3b0_1",Mr="_progress_bar_no3b0_7",Vr="_standard_no3b0_14",Dr="_accent_no3b0_18",Ur="_progress_content_no3b0_22",Y={progress_frame:Hr,progress_bar:Mr,standard:Vr,accent:Dr,progress_content:Ur},zr=({options:e,children:t})=>{const n=+e.min||0,o=+e.max||100,r=+e.value||0;let i=r?(r-n)*100/(o-n):0;i>100&&(i=100),i<0&&(i=0);const s=[Y.progress_bar];return e.style==="accent"?s.push(Y.accent):s.push(Y.standard),c("div",{class:Y.progress_frame,children:[c("div",{class:s.join(" "),style:{width:`${i}%`}}),c("div",{class:Y.progress_content,children:[t," "]})]})},Wr={regexp:/\[progress.+?\].*?\[\/progress\]/ig,replacer:(e,t)=>{const n=e.match(/\[progress(.+?)\](.*?)\[\/progress\]/i),o=ye(n[1]);return c(zr,{options:o,children:t(n[2])})}},Br="_input_19eau_1",Nr={input:Br};function qr(e,t,n){try{e.ink.setVariable(t,n)}catch(o){e.ink.story().onError(o.toString())}}function Yr(e,t){let n;try{n=e.ink.getVariable(t)}catch(o){e.ink.story().onError(o.toString())}return n}const Gr=({inactive:e,options:t})=>{const[n,o]=I(null),{atrament:r}=x();R(()=>o(Yr(r,t.var)),[r,t.var]);const i=l=>{let _=l.srcElement.value||n;t.type==="number"&&(_=+_),qr(r,t.var,_),o(_)},s=t.type==="number"?"number":"text";return c("input",{disabled:e,class:Nr.input,value:n,placeholder:t.placeholder,type:s,onInput:i})},Kr={regexp:/\[input.+?\]/ig,replacer:(e,t,n)=>{const o=e.match(/\[input(.+?)\]/i),r=ye(o[1]);return c(Gr,{inactive:n,options:r})}},Xr="_hidden_7ewnd_1",Jr="_revealed_7ewnd_12",$t={hidden:Xr,revealed:Jr},Qr=[$t.hidden,$t.revealed],Zr=({children:e})=>{const[t,n]=I(0);return c("span",{class:Qr[t],onClick:()=>n(1-t),children:c("span",{children:e})})},ei={regexp:/\[spoiler\].*?\[\/spoiler\]/ig,replacer:(e,t)=>{const n=e.match(/\[spoiler\](.*?)\[\/spoiler\]/i);return c(Zr,{children:t(n[1])})}},ti="_infoblock_1o708_1",ni="_font_ui_1o708_9",oi="_side_highlight_1o708_13",ri="_side_accent_1o708_17",re={infoblock:ti,font_ui:ni,side_highlight:oi,side_accent:ri},ii=({children:e,options:t})=>{console.log(t);const n=[re.infoblock];return t.font==="system"&&n.push(re.font_ui),t.side&&(t.side==="accent"?n.push(re.side_accent):n.push(re.side_highlight)),c("div",{class:n.join(" "),children:e})},si={regexp:/\[info.*?\].*?\[\/info\]/ig,replacer:(e,t)=>{const n=e.match(/\[info(.*?)\](.*?)\[\/info\]/i),o=ye(n[1]);return c(ii,{options:o,children:t(n[2])})}},ci=[Lr,Rr,Fr,Wr,Kr,ei,si],ai=e=>/<\/?[a-z][\s\S]*>/i.test(e);function li(e,t,n,o){let r=e;if(typeof e!="string")return r;const i=e.split(t),s=e.match(t);return s&&(r=i.flatMap((l,_)=>_<s.length?[l,n(s[_],u=>te(u,o),o)]:[l])),r}function te(e,t){let n=[e];return ci.forEach(o=>{n=n.flatMap(r=>li(r,o.regexp,o.replacer,t))}),n.filter(o=>o).map((o,r)=>typeof o=="string"&&ai(o)?c("span",{dangerouslySetInnerHTML:{__html:o}},r):o)}const _i=()=>{const{atrament:e,state:t}=x(),[n,o]=I(!1);let r=t.metadata.title||"Atrament UI";if(t.metadata.toolbar&&!n)try{const s=e.ink.evaluateFunction(t.metadata.toolbar,[],!0);s.output&&(r=s.output)}catch(s){e.ink.story().onError(s.toString()),o(!0)}const i=te(r);return c("div",{class:[Er.toolbar,"atrament-toolbar"].join(" "),children:i})},ui="_container_text_1iih0_1",di={container_text:ui},Be=({children:e,fontSize:t})=>c("div",{class:[di.container_text,"atrament-text-container"].join(" "),style:{"font-size":`${t}%`},children:e}),fi="_container_scenes_h7ajh_1",hi={container_scenes:fi},pi=e=>({top:"start",start:"start",middle:"center",bottom:"end",end:"end"})[e]||"center",gi=({children:e,align:t})=>c("div",{class:[hi.container_scenes,"atrament-container-scene"].join(" "),style:{"justify-content":pi(t)},children:e}),mi="_scene_14av0_1",vi={scene:mi},_n=e=>e===void 0||e==="auto"||e==="instant"||e==="smooth";function yi(e,t){this.scrollLeft=e,this.scrollTop=t}const un=(e,t,n="cannot convert to dictionary.")=>`Failed to execute '${e}' on '${t}': ${n}`,dn=(e,t,n)=>un(e,t,`The provided value '${n}' is not a valid enum value of type ScrollBehavior.`),Et=(e,t,n)=>{var o;const r=`__SEAMLESS.BACKUP$${t}`;return!e[r]&&e[t]&&!(!((o=e[t])===null||o===void 0)&&o.__isPolyfill)&&(e[r]=e[t]),e[r]||n},bi=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},Ne=e=>e.ownerDocument.scrollingElement||e.ownerDocument.documentElement;function ki(e){if(typeof Event=="function")return new Event("scrollend",{bubbles:e,cancelable:!1});const t=document.createEvent("Event");return t.initEvent("scrollend",e,!1),t}const wi=e=>.5*(1-Math.cos(Math.PI*e));function qe(){var e;let t;return!((e=window.performance)===null||e===void 0)&&e.now?t=()=>window.performance.now():t=()=>window.Date.now(),qe=t,t()}const Si=500,fn=e=>{const n=(qe()-e.timeStamp)/(e.duration||Si);if(n>1){e.method(e.targetX,e.targetY),e.callback();return}const o=(e.timingFunc||wi)(n),r=e.startX+(e.targetX-e.startX)*o,i=e.startY+(e.targetY-e.startY)*o;e.method(r,i),e.rafId=window.requestAnimationFrame(()=>{fn(e)})},fe=e=>isFinite(e)?Number(e):0,$i=e=>{var t;return(t=e.isConnected)!==null&&t!==void 0?t:!e.ownerDocument||!(e.ownerDocument.compareDocumentPosition(e)&1)},Ei=(e,t,n)=>{var o,r;if(!$i(e))return;const i=e.scrollLeft,s=e.scrollTop,l=fe((o=t.left)!==null&&o!==void 0?o:i),_=fe((r=t.top)!==null&&r!==void 0?r:s);if(l===i&&_===s)return;const u=Et(HTMLElement.prototype,"scroll",yi),f=Et(Object.getPrototypeOf(e),"scroll",u).bind(e);if(t.behavior!=="smooth"){f(l,_);return}const a=()=>{window.removeEventListener("wheel",h),window.removeEventListener("touchmove",h)},p=()=>{a();const y=e.nodeType===9;e.dispatchEvent(ki(y))},d=Object.assign(Object.assign({},n),{timeStamp:qe(),startX:i,startY:s,targetX:l,targetY:_,rafId:0,method:f,callback:p}),h=()=>{window.cancelAnimationFrame(d.rafId),a()};window.addEventListener("wheel",h,{passive:!0,once:!0}),window.addEventListener("touchmove",h,{passive:!0,once:!0}),fn(d)},Ci=e=>e.window===e,xi=e=>(t,n,o)=>{const[r,i]=Ci(t)?[Ne(t.document.documentElement),"Window"]:[t,"Element"],s=n??{};if(!bi(s))throw new TypeError(un(e,i));if(!_n(s.behavior))throw new TypeError(dn(e,i,s.behavior));e==="scrollBy"&&(s.left=fe(s.left)+r.scrollLeft,s.top=fe(s.top)+r.scrollTop),Ei(r,s,o)},Pi=xi("scroll"),Li=Pi,hn=e=>{switch(e){case"horizontal-tb":case"lr":case"lr-tb":case"rl":case"rl-tb":return 0;case"vertical-rl":case"tb":case"tb-rl":return 1;case"vertical-lr":case"tb-lr":return 2;case"sideways-rl":return 3;case"sideways-lr":return 4}return 0},pn=(e,t,n,o)=>{let r=0;switch(t||(r^=2),e){case 0:r=r>>1|(r&1)<<1,[n,o]=[o,n];break;case 1:case 3:r^=1;break;case 4:r^=2;break}return[r,n,o]},Ai=e=>(pn(hn(e.writingMode),e.direction!=="rtl",void 0,void 0)[0]&1)===1,Ti=(e,t,n)=>{const[o,r,i]=pn(t,n,e.block||"start",e.inline||"nearest");return[r,i].map((s,l)=>{switch(s){case"center":return 1;case"nearest":return 0;default:{const _=o>>l&1;return s==="start"==!_?2:3}}})},Ct=(e,t,n,o,r,i,s)=>e!==0?e:r<t&&i>n||r>t&&i<n?null:r<=t&&s<=o||i>=n&&s>=o?2:i>n&&s<o||r<t&&s>o?3:null,xt=e=>e!=="visible"&&e!=="clip",Ri=e=>{var t;try{return((t=e.ownerDocument.defaultView)===null||t===void 0?void 0:t.frameElement)||null}catch{return null}},Ii=(e,t)=>e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth?xt(t.overflowY)||xt(t.overflowX)||e===Ne(e):!1,Pt=e=>{const t=e.parentNode,n=e.parentElement;if(n===null&&t!==null){if(t.nodeType===11)return t.host;if(t.nodeType===9)return Ri(e)}return n},Se=(e,t,n)=>e<t?t:e>n?n:e,Oi=e=>["scroll-margin","scroll-snap-margin"].filter(t=>t in e.documentElement.style)[0],ji=(e,t,n)=>{const{top:o,right:r,bottom:i,left:s}=t,l=Oi(e.ownerDocument);if(!l)return[o,r,i,s];const _=u=>{const f=n.getPropertyValue(`${l}-${u}`);return parseInt(f,10)||0};return[o-_("top"),r+_("right"),i+_("bottom"),s-_("left")]},ie=(e,t,n)=>{switch(e){case 1:return(t+n)/2;case 3:return n;case 2:case 0:return t}},Fi=(e,t)=>{var n,o,r;const i=(n=e.ownerDocument.defaultView)===null||n===void 0?void 0:n.visualViewport,[s,l,_,u]=e===Ne(e)?[0,0,(o=i==null?void 0:i.width)!==null&&o!==void 0?o:e.clientWidth,(r=i==null?void 0:i.height)!==null&&r!==void 0?r:e.clientHeight]:[t.left,t.top,e.clientWidth,e.clientHeight],f=s+e.clientLeft,a=l+e.clientTop,p=f+_,d=a+u;return[a,p,d,f]},Hi=(e,t)=>{const n=[];let o=e.ownerDocument,r=o.defaultView;if(!r)return n;const i=window.getComputedStyle(e),s=i.direction!=="rtl",l=hn(i.writingMode||i.getPropertyValue("-webkit-writing-mode")||i.getPropertyValue("-ms-writing-mode")),[_,u]=Ti(t,l,s);let[f,a,p,d]=ji(e,e.getBoundingClientRect(),i);for(let h=Pt(e);h!==null;h=Pt(h)){if(o!==h.ownerDocument){if(o=h.ownerDocument,r=o.defaultView,!r)break;const{left:Ye,top:Ge}=h.getBoundingClientRect();f+=Ge,a+=Ye,p+=Ge,d+=Ye}const y=r.getComputedStyle(h);if(y.position==="fixed")break;if(!Ii(h,y))continue;const v=h.getBoundingClientRect(),[m,w,g,b]=Fi(h,v),$=Ct(_,b,w,h.clientWidth,d,a,a-d),C=Ct(u,m,g,h.clientHeight,f,p,p-f),L=$===null?0:ie($,d,a)-ie($,b,w),q=C===null?0:ie(C,f,p)-ie(C,m,g),P=Ai(y)?Se(L,-h.scrollWidth+h.clientWidth-h.scrollLeft,-h.scrollLeft):Se(L,-h.scrollLeft,h.scrollWidth-h.clientWidth-h.scrollLeft),H=Se(q,-h.scrollTop,h.scrollHeight-h.clientHeight-h.scrollTop);n.push([h,{left:h.scrollLeft+P,top:h.scrollTop+H,behavior:t.behavior}]),f=Math.max(f-H,m),a=Math.min(a-P,w),p=Math.min(p-H,g),d=Math.max(d-P,b)}return n},Mi=(e,t,n)=>{const o=t||{};if(!_n(o.behavior))throw new TypeError(dn("scrollIntoView","Element",o.behavior));Hi(e,o).forEach(([i,s])=>{Li(i,s,n)})},Vi="_imagebox_vcpgt_1",Di="_image_vcpgt_1",Lt={imagebox:Vi,image:Di},Ui=({src:e})=>e?c("div",{class:[Lt.imagebox,"atrament-image-container"].join(" "),children:c("img",{src:e,class:[Lt.image,"atrament-image"].join(" ")})}):"",zi=({content:e,isCurrent:t})=>{let n;return t||(n={opacity:"70%"}),e===`
`?"":c("p",{style:n,children:te(e,!t)})};function Wi(e,t){const n=[];for(let o of t)n.push(new Promise(r=>{const i=new Image;i.onload=r,i.onerror=r,i.src=e(o)}));return Promise.allSettled(n)}const Bi=({scene:e,isCurrent:t,isSingle:n,readyHandler:o})=>{const[r,i]=I(!1),s=xn(null),l=T(_=>{o(!0),setTimeout(()=>{Mi(s.current,{behavior:_,block:"start"},{duration:300})},100)},[o]);return R(()=>{r&&t&&l(n?"instant":"smooth")},[r,t,n,l]),R(()=>{(async()=>{await Wi(je,e.images),i(!0)})()},[e,i]),c("div",{class:[vi.scene,"atrament-scene",t&&r?"animation_appear":""].join(" "),ref:s,children:c("div",{style:{opacity:r?1:0},children:e.content.map((_,u)=>c(F,{children:[c(Ui,{src:je(_.image)}),c(zi,{isCurrent:t,content:_.text})]},`paragraph-${e.uuid}-${u}`))})})},Ni="_link_home_6qsrz_1",qi={link_home:Ni},At=({onClick:e})=>c("button",{onClick:e,class:qi.link_home,children:"The end"},"mainmenu"),Yi="_container_choices_z7cmv_1",Gi={container_choices:Yi},Tt=({children:e,key:t,isReady:n})=>c("div",{class:[Gi.container_choices,"atrament-container-choices",n?"animation_appear":""].join(" "),children:c("div",{style:{opacity:n?1:0},children:c(de,{children:e})})},t),Ki="_choice_button_11u3x_1",Xi="_choice_active_11u3x_39",Ji="_choice_inactive_11u3x_87",Qi="_disappear_11u3x_1",$e={choice_button:Ki,choice_active:Xi,choice_inactive:Ji,disappear:Qi},Zi=({choice:e,chosen:t,handleClick:n})=>{const o=t!==null,r=t===e.id,i=()=>{o||n(e.id)};return c("button",{class:`${$e.choice_button} ${o?r?$e.choice_active:$e.choice_inactive:""}`,onClick:i,children:te(e.choice)})},es=({isReady:e,setReady:t})=>{const{atrament:n,state:o,makeChoice:r,continueStory:i}=x(),[s,l]=I(null),_=o.scenes.length-1,u=o.scenes[_],f=u&&u.choices?u.choices.length:-1,a=!!o.metadata.hypertext,p=T(y=>{const v=f>1?350:150;l(y),setTimeout(()=>{setTimeout(()=>{l(null),t(!1),r(y),i()},v)},0)},[r,i,t,f]),d=T(y=>{const v=+y.key;y.target.tagName.toLowerCase()==="input"||a||f>0&&v>0&&v<=f&&p(v-1)},[f,p,a]);R(()=>(document.addEventListener("keydown",d,!1),()=>{document.removeEventListener("keydown",d,!1)}),[d]);const h=async()=>{await n.game.removeSave(),B("/")};if(a)return f===0?c(Tt,{isReady:!0,children:c(At,{onClick:h})}):c(F,{});if(f>=0){const y=`choices-${u.uuid}`;return c(Tt,{isReady:e,children:f===0?c(At,{onClick:h}):u.choices.map((v,m)=>c(Zi,{choice:v,chosen:s,handleClick:p},`${y}-${m}`))},y)}return c(F,{})},ts=()=>{const{state:e}=x(),[t,n]=I(!1),o=e.scenes.length-1;return c(Be,{fontSize:e.settings.fontSize,children:[c(gi,{align:e.metadata.scenes_align,children:e.scenes.map((r,i)=>c(Bi,{scene:r,isCurrent:i===o,isSingle:o===0,readyHandler:n},r.uuid))}),c(es,{isReady:t,setReady:n})]})},ns="_overlay_container_q2jj8_1",os="_overlay_header_q2jj8_21",rs="_overlay_title_q2jj8_49",is="_overlay_content_q2jj8_61",ss="_button_back_q2jj8_91",G={overlay_container:ns,overlay_header:os,overlay_title:rs,overlay_content:is,button_back:ss},cs=()=>{const{atrament:e,state:t}=x(),n=T(()=>{e.state.setSubkey("OVERLAY","activeOverlay",null),e.state.setSubkey("OVERLAY","content","")},[e]);if(!t.OVERLAY.activeOverlay)return c(F,{});const o=t.OVERLAY.content.split(`
`),r=t.OVERLAY.title;return c("div",{class:G.overlay_container,children:[c("div",{class:G.overlay_header,children:[c("button",{class:G.button_back,onClick:n,children:"❮"}),r&&c("div",{class:G.overlay_title,children:r})]}),c("div",{class:[G.overlay_content,"atrament-overlay"].join(" "),children:c(Be,{fontSize:t.settings.fontSize,children:o.map((i,s)=>c("p",{children:te(i)},s))})})]})},as=()=>{const{continueStory:e}=x();return R(()=>{e()},[e]),c(ve,{children:[c(We,{}),c(Sr,{}),c(_i,{}),c(cs,{}),c(ts,{})]})},ls=()=>{const{state:e}=x(),t=()=>B("/");return c(ve,{children:[c(We,{}),c(Be,{fontSize:e.settings.fontSize,children:[c(ze,{children:c(de,{children:[c("img",{src:"logo.png",style:{margin:"auto",display:"block",width:"50%"}}),c("h1",{style:{"text-align":"center"},children:"Atrament UI"}),c("p",{children:"Web UI for Ink games, made with:"}),c("ul",{children:[c("li",{children:c("a",{href:"https://github.com/technix/atrament-core",target:"_blank",rel:"noreferrer",children:"Atrament"})}),c("li",{children:c("a",{href:"https://github.com/y-lohse/inkjs",target:"_blank",rel:"noreferrer",children:"InkJS"})}),c("li",{children:c("a",{href:"https://preactjs.com/",target:"_blank",rel:"noreferrer",children:"Preact"})}),c("li",{children:c("a",{href:"https://howlerjs.com/",target:"_blank",rel:"noreferrer",children:"Howler"})}),c("li",{children:c("a",{href:"https://github.com/nanostores/nanostores",target:"_blank",rel:"noreferrer",children:"Nanostores"})}),c("li",{children:c("a",{href:"https://github.com/localForage/localForage",target:"_blank",rel:"noreferrer",children:"localForage"})}),c("li",{children:c("a",{href:"https://github.com/101arrowz/fflate",target:"_blank",rel:"noreferrer",children:"fflate"})})]})]})}),c(de,{children:c(le,{onClick:t,children:"Main menu"},"mainmenu")})]})]})};let se;function _s(){const[e,t]=I(!1);R(()=>{(async()=>{se=(await Ze(()=>import("./index-BkCeB0Cp.js"),__vite__mapDeps([0,1]),import.meta.url)).default;const{Story:i}=await Ze(async()=>{const{Story:s}=await import("./ink-es2015-B9WHLL_v.js").then(l=>l.i);return{Story:s}},__vite__mapDeps([2,1]),import.meta.url);await _o(se,i),t(!0)})()},[]);const n=T(o=>{o.url==="/"&&o.previous&&se.game.clear()},[]);return e?c(Xt.Provider,{value:se,children:c(gt,{children:c(Kt,{history:Un(),onChange:n,children:[c(br,{path:"/"}),c(as,{path:"/game"}),c(ls,{path:"/about"})]})})}):c(gt,{children:c(To,{})})}kn(c(_s,{}),document.getElementById("app"));

{"version":3,"sources":["webpack:///./components/routes/home.js"],"names":["HomeRoute","atrament","useContext","Atrament","_gamestate$metadata","useStore","store","metadata","title","author","_useState2","_slicedToArray","useState","canBeResumed","setResumeState","useEffect","_ref","_asyncToGenerator","canResumeGame","game","canResume","apply","arguments","initHome","newGame","useCallback","start","route","resumeGame","resume","h","Container","ContainerFlex","Settings","Header","concat","Block","align","LinkMenu","key","onClick"],"mappings":"qhDAmDeA,UA1CG,WAChB,IAAMC,EAAWC,YAAWC,KAG5BC,EAFkBC,YAASJ,EAASK,SAEAC,SAA5BC,EAAKJ,EAALI,MAAOC,EAAML,EAANK,OAEyCC,EAAAC,EAAfC,aAAS,GAAM,GAAhDC,EAAYH,EAAA,GAAEI,EAAcJ,EAAA,GACpCK,aAAU,WAAM,IAAAC,GACG,YAAHA,KAAAC,GAAG,YACf,IAAMC,QAAsBjB,EAASkB,KAAKC,YAC1CN,IAAiBI,EACnB,KAACG,MAAA,KAAAC,UAAA,CACDC,EACF,GAAG,IAEH,IAAMC,EAAUC,YAAWR,GAAC,kBACpBhB,EAASkB,KAAKO,QACpBC,YAAM,QACR,KAEMC,EAAaH,YAAWR,GAAC,kBACvBhB,EAASkB,KAAKU,SACpBF,YAAM,QACR,KAEA,OACEG,YAACC,IAAS,KACRD,YAACE,IAAa,KACZF,YAACG,IAAQ,MACTH,YAACI,IAAM,KACLJ,YAAA,UAAKtB,GAAgB,eACrBsB,YAAA,SAAIrB,EAAS,MAAH0B,OAAS1B,GAAW,qBAEhCqB,YAACM,IAAK,CAACC,MAAM,OACVxB,EAAeiB,YAACQ,IAAQ,CAACC,IAAI,eAAeC,QAASZ,GAAY,YAAsB,GACxFE,YAACQ,IAAQ,CAACC,IAAI,YAAYC,QAAShB,GAAS,cAKtD,C","file":"route-home.chunk.356fb.js","sourcesContent":["import { h } from 'preact';\nimport { route } from 'preact-router';\nimport { useContext, useEffect, useState, useCallback } from 'preact/hooks';\nimport { useStore } from '@nanostores/preact';\nimport Atrament from 'src/atrament-context';\n\nimport { Block, Container, ContainerFlex, Header, LinkMenu } from 'src/components/ui';\nimport Settings from 'src/components/screens/settings';\n\nconst HomeRoute = () => {\n  const atrament = useContext(Atrament);\n  const gamestate = useStore(atrament.store());\n\n  const { title, author } = gamestate.metadata;\n\n  const [ canBeResumed, setResumeState ] = useState(false);\n  useEffect(() => {\n    const initHome = async () => {\n      const canResumeGame = await atrament.game.canResume();\n      setResumeState(!!canResumeGame);\n    }\n    initHome();\n  }, []);\n\n  const newGame = useCallback(async () => {\n    await atrament.game.start();\n    route('/game');\n  });\n\n  const resumeGame = useCallback(async () => {\n    await atrament.game.resume();\n    route('/game');\n  });\n\n  return (\n    <Container>\n      <ContainerFlex>\n        <Settings />\n        <Header>\n          <h1>{title ? title : \"Atrament UI\"}</h1>\n          <p>{author ? `by ${author}` : \"Test application\"}</p>\n        </Header>\n        <Block align='end'>\n          {canBeResumed ? <LinkMenu key=\"continuegame\" onClick={resumeGame}>Continue</LinkMenu> : ''}\n          <LinkMenu key=\"startgame\" onClick={newGame}>New game</LinkMenu>\n        </Block>\n      </ContainerFlex>\n    </Container>\n  );\n};\n\nexport default HomeRoute;"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./components/screens/scenes/scene.js","webpack:///./components/screens/scenes/index.css","webpack:///./components/screens/scenes/index.js","webpack:///./components/screens/choices/index.css","webpack:///./components/screens/choices/index.js","webpack:///./components/routes/game.js"],"names":["Scene","_ref","pStyle","scene","isCurrent","atrament","useContext","Atrament","opacity","elementRef","useRef","useEffect","current","scrollIntoView","behavior","h","class","style","block","join","ref","content","map","item","Fragment","tags","IMAGE","Image","src","game","getAssetPath","dangerouslySetInnerHTML","__html","text","BlockScenes","scenes","lastSceneIndex","length","block_scene","s","i","Choices","choices","handleClick","key","Date","now","block_choices","Block","choice","index","ChoiceButton","concat","GameRoute","gamestate","useStore","store","makeChoice","useCallback","id","continueStory","resume","apply","arguments","init","currentScene","slice","gameEnd","Container","Settings","ContainerText","fontSize","settings","Scenes","LinkHome"],"mappings":"4FAAA,4EAoCeA,IA9BD,SAAHC,GAA6B,IAElCC,EAFWC,EAAKF,EAALE,MAAOC,EAASH,EAATG,UAChBC,EAAWC,YAAWC,KAEvBH,IACHF,EAAS,CAACM,QAAS,QAErB,IAAMC,EAAaC,YAAO,MAO1B,OANAC,aAAU,WACJP,GACFK,EAAWG,QAAQC,eAAe,CAAEC,SAAU,UAElD,GAAG,CAACV,EAAWK,IAGbM,YAAA,OAAKC,MAAO,CAACC,IAAMC,MAAO,sBAAuBd,EAAY,mBAAqB,IAAIe,KAAK,KAAMC,IAAKX,GAElGN,EAAMkB,QACHC,KAAI,SAACC,GACJ,OACER,YAAAS,EAAA,KACGD,EAAKE,KAAKC,MAAQX,YAACY,IAAK,CAACC,IAAKvB,EAASwB,KAAKC,aAAaP,EAAKE,KAAKC,SAAa,GACjFX,YAAA,KAAGE,MAAOf,EAAQ6B,wBAAyB,CAACC,OAAQT,EAAKU,QAG/D,IAIV,C,kECjCe,KAAC,YAAc,qBAAqB,MAAQ,e,8PCc5CC,EAXK,SAAHjC,GAAmB,IAAbkC,EAAMlC,EAANkC,OACfC,EAAiBD,EAAOE,OAAS,EACvC,OACEtB,YAAA,OAAKC,MAAO,CAACC,IAAMqB,YAAa,wBAAwBnB,KAAK,MAEzDgB,EAAOb,KAAI,SAACiB,EAAGC,GAAC,OAAKzB,YAACf,IAAK,CAACG,MAAOoC,EAAGnC,UAAWoC,IAAMJ,GAAkB,IAIjF,ECZe,GAAC,cAAgB,wBCsBjBK,EAnBC,SAAHxC,GAAiC,IAA3ByC,EAAOzC,EAAPyC,QAASC,EAAW1C,EAAX0C,YAC1B,GAAKD,EAGL,OACE3B,YAAA,OAAK6B,IAAKC,KAAKC,MAAO9B,MAAO,CAACC,EAAM8B,cAAe,yBAA0B,oBAAoB5B,KAAK,MACpGJ,YAACiC,IAAK,KACHN,EAAQpB,KAAI,SAAC2B,EAAQC,GAAK,OACzBnC,YAACoC,IAAY,CACXP,IAAG,GAAAQ,OAAKP,KAAKC,MAAK,KAAAM,OAAIF,GACtBD,OAAQA,EACRN,YAAaA,GACb,KAKZ,E,wBCsBeU,UA/BG,WAChB,IAAMhD,EAAWC,YAAWC,KACtB+C,EAAYC,YAASlD,EAASmD,SAE9BC,EAAaC,aAAY,SAACC,GAC9BtD,EAASwB,KAAK4B,WAAWE,GACzBtD,EAASwB,KAAK+B,eAChB,IAEAjD,aAAU,WAAM,IAAAV,GACD,WAAH,OAAAA,M,EAAG,kBACLI,EAASwB,KAAKgC,SACpBxD,EAASwB,KAAK+B,eAChB,E,gLAACE,MAAA,KAAAC,W,KAAA,CACDC,EACF,GAAG,IAEH,IAAMC,EAAeX,EAAUnB,OAAO+B,OAAO,GAAG,GAC5CC,EAAUF,GAAgD,IAAhCA,EAAavB,QAAQL,OAEnD,OACEtB,YAACqD,IAAS,KACRrD,YAACsD,IAAQ,MACTtD,YAACuD,IAAa,CAACC,SAAUjB,EAAUkB,SAASD,UAC1CxD,YAAC0D,EAAM,CAACtC,OAAQmB,EAAUnB,SACzBgC,EAAUpD,YAAC2D,IAAQ,MAAM3D,YAAC0B,EAAO,CAACC,QAASuB,aAAY,EAAZA,EAAcvB,QAASC,YAAac,KAIxF,C","file":"route-game.chunk.67e35.js","sourcesContent":["import { h } from 'preact';\nimport style from './index.css';\nimport { useRef, useEffect, useContext } from 'preact/hooks';\nimport { Image } from 'src/components/ui';\nimport Atrament from 'src/atrament-context';\n\nconst Scene = ({ scene, isCurrent }) => {\n  const atrament = useContext(Atrament);\n  let pStyle;\n  if (!isCurrent) {\n    pStyle = {opacity: '70%'};\n  }\n  const elementRef = useRef(null);\n  useEffect(() => {\n    if (isCurrent) {\n      elementRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [isCurrent, elementRef]);\n\n  return (\n    <div class={[style.block, 'atrament-block-text', isCurrent ? 'animation_appear' : ''].join(' ')} ref={elementRef}>\n      {\n        scene.content\n          .map((item) => {\n            return (\n              <>\n                {item.tags.IMAGE ? <Image src={atrament.game.getAssetPath(item.tags.IMAGE)} /> : ''}\n                <p style={pStyle} dangerouslySetInnerHTML={{__html: item.text}}></p>\n              </>\n            );\n          })\n      }\n    </div>\n  )\n};\n\nexport default Scene;\n\n","// extracted by mini-css-extract-plugin\nexport default {\"block_scene\":\"block_scene__IjQGg\",\"block\":\"block__NwK6o\"};","import { h } from 'preact';\nimport style from './index.css';\nimport Scene from './scene';\n\nconst BlockScenes = ({ scenes }) => {\n  const lastSceneIndex = scenes.length - 1;\n  return (\n    <div class={[style.block_scene, 'atrament-block-scene'].join(' ')}>\n      {\n        scenes.map((s, i) => <Scene scene={s} isCurrent={i === lastSceneIndex} />)\n      }\n    </div>\n  );\n};\n\nexport default BlockScenes;\n","// extracted by mini-css-extract-plugin\nexport default {\"block_choices\":\"block_choices__5vDxh\"};","import { h } from 'preact';\nimport style from './index.css';\nimport { Block, ChoiceButton } from 'src/components/ui';\n\nconst Choices = ({ choices, handleClick }) => {\n  if (!choices) {\n    return;\n  }\n  return (\n    <div key={Date.now()} class={[style.block_choices, 'atrament-block-choices', 'animation_appear'].join(' ')}>\n      <Block>\n        {choices.map((choice, index) => (\n          <ChoiceButton\n            key={`${Date.now()}-${index}`}\n            choice={choice}\n            handleClick={handleClick}\n          />)\n        )}\n      </Block>\n    </div>\n  )\n};\n\nexport default Choices;\n","import { h } from 'preact';\r\nimport { useStore } from '@nanostores/preact';\r\nimport Atrament from 'src/atrament-context';\r\n\r\nimport { useCallback, useContext, useEffect } from 'preact/hooks';\r\nimport { Container, ContainerText } from 'src/components/ui';\r\n\r\nimport Scenes from 'src/components/screens/scenes';\r\nimport Choices from 'src/components/screens/choices';\r\nimport Settings from 'src/components/screens/settings';\r\nimport LinkHome from '../ui/link-home';\r\n\r\nconst GameRoute = () => {\r\n  const atrament = useContext(Atrament);\r\n  const gamestate = useStore(atrament.store());\r\n\r\n  const makeChoice = useCallback((id) => {\r\n    atrament.game.makeChoice(id);\r\n    atrament.game.continueStory();\r\n  })\r\n\r\n  useEffect(() => {\r\n    const init = async () => {\r\n      await atrament.game.resume();\r\n      atrament.game.continueStory();\r\n    }\r\n    init();\r\n  }, []);\r\n\r\n  const currentScene = gamestate.scenes.slice(-1)[0];\r\n  let gameEnd = currentScene && currentScene.choices.length === 0;\r\n\r\n  return (\r\n    <Container>\r\n      <Settings />\r\n      <ContainerText fontSize={gamestate.settings.fontSize}>\r\n        <Scenes scenes={gamestate.scenes} />\r\n        {gameEnd ? <LinkHome /> : <Choices choices={currentScene?.choices} handleClick={makeChoice} />}\r\n      </ContainerText>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default GameRoute;"],"sourceRoot":""}